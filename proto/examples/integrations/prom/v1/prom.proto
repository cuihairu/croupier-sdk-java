syntax = "proto3";

package examples.integrations.prom.v1;
option java_package = "io.github.cuihairu.croupier.examples.integrations.prom.v1";
option java_multiple_files = true;

import "croupier/component/v1/ui_options.proto";

option go_package = "github.com/cuihairu/croupier/pkg/pb/examples/integrations/prom/v1;promv1";

message QueryRangeRequest {
  string expr = 1 [(croupier.component.v1.ui) = { label: "PromQL", widget: "textarea", placeholder: "rate(http_requests_total[5m])" }];
  string start = 2 [(croupier.component.v1.ui) = { label: "开始时间", widget: "date" }];
  string end = 3 [(croupier.component.v1.ui) = { label: "结束时间", widget: "date" }];
  string step = 4 [(croupier.component.v1.ui) = { label: "步长", placeholder: "30s" }];
}

message Sample { int64 t = 1; double v = 2; }

message Timeseries {
  map<string,string> labels = 1;
  repeated Sample samples = 2;
}

message QueryRangeResponse { repeated Timeseries series = 1; }
